@model Prueba5.Models.ResultadoBusqueda

<script src="@Url.Content("~/Scripts/jquery-1.5.1.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

<!--Mostramos la informacion del post-->
    <table class="table">
        <thead>
            <tr>
                <th>
                    Recorrido
                </th>
                <th>
                    Lo que está pasando...
                </th>
                <th>
                    Estado
                </th>
                <th>
                    Hace aproximadamente...
                </th>
                <th>
                    Publicado por
                </th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>@Model.Recorrido</td>
                <td>@Model.ObtenerLejania()</td>
                <td>@Model.NombreEstado</td>
                <td>@Model.Time()</td>
                <td>@Model.Username</td>
            </tr>
        </tbody>
    </table>


<!--Mostramos sector para comentar-->
<div class="clear"></div>
<div class="caja-comentario-fb"><div class="fb-comments" data-href="@Request.RawUrl"  data-num-posts="2" data-width="380px"></div></div>

@using (Html.BeginForm())
{
        <!--Caja de comentarios Facebook-->
        <!--Caja de comentario Normal-->
        <div class="caja-comentario-normal">
                <div class="editor-label"> 
                    @Html.ValidationMessageFor(x => x.comentario)
                    @Html.TextAreaFor(x => x.comentario, new { style = "resize:none;" })
                </div>
                <input type="submit" name="button" value="Enviar" />  Largo Máximo: 400 carácteres.
        </div>
}
<div class="caja-comentario-mostrar">
    <!--Algun mensaje que mostrar?-->
    @if(Prueba5.Models.MessageLog.Get().Count>0)
    {
        foreach (string s in Prueba5.Models.MessageLog.Get())
        {
            <div class="mensaje">@s</div>
        }
        Prueba5.Models.MessageLog.Reset();
    }
    <!--Mostramos ahora los comentarios-->
    <!--Primero debemos cargarlos-->
    @{Model.ComentariosLoad();}
    <!--Ahora podemos mostrarlos-->
    @if (Model.ComentariosGet().Count() > 0)
    {
        <center><p>Comentarios (@Model.ComentariosGet().Count())</p>

        @foreach (Prueba5.Models.ComentarioInformacion c in Model.ComentariosGet())
        {
            <div class="caja-comentario-comentario">
                <div class="caja-comentario-comentario-head">@c.Comentario.Cuenta.username</div>
                <div class="caja-comentario-comentario-body">@c.Comentario.contenido</div>
                <div class="caja-comentario-comentario-footer">
                    <div class="caja-comentario-comentario-footer-left">@c.Comentario.fecha</div>
                @if(User.Identity.Name==c.Comentario.Cuenta.username){
                     <div class="caja-comentario-comentario-footer-right">@Html.ActionLink("Eliminar", "EliminarComentario", new { ComentarioInformacionID = c.ID, link = Request.RawUrl })</div>  
                }
                </div>
                <div class="clear"></div>
           </div>
        }
        </center>
    }
    else
    {
        <center><p>No existen comentarios asociados.</p></center>
    }
</div>

<div class="clear"></div>
<br />